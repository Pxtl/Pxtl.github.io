<rss xmlns:a10="http://www.w3.org/2005/Atom" version="2.0"><channel><title>Pxtl.ca</title><link>http://www.pxtl.ca/rss.xml</link><description>Pxtl.ca</description><item><guid isPermaLink="true">http://www.pxtl.ca/2020/05/30/mineclone2-skins/</guid><link>http://www.pxtl.ca/2020/05/30/mineclone2-skins/</link><author>pxtl@hotmail.com</author><category>Software</category><title>Mineclone2 Skins (rpi minetest-server part 4)</title><description>&lt;p&gt;Continuing on our marathon process of setting up the perfect Mineclone2 server,
this is going to be a brief side-guide - how set up skins in mineclone 2.  I
tried several approaches to this problem - the popular  skin mods in minetest
are meant to manage a connection to an online database of skins, and I just
wanted to pre-load enough skins so the kids would have a library to choose from.&lt;/p&gt;

&lt;p&gt;I couldn't get any of the existing skins mods to work fully, so we're going to
just set the files up manually.&lt;/p&gt;

</description><pubDate>Sat, 30 May 2020 04:00:00 Z</pubDate><a10:updated>2020-05-30T04:00:00Z</a10:updated><a10:content type="html">&lt;p&gt;Continuing on our marathon process of setting up the perfect Mineclone2 server,
this is going to be a brief side-guide - how set up skins in mineclone 2.  I
tried several approaches to this problem - the popular  skin mods in minetest
are meant to manage a connection to an online database of skins, and I just
wanted to pre-load enough skins so the kids would have a library to choose from.&lt;/p&gt;

&lt;p&gt;I couldn't get any of the existing skins mods to work fully, so we're going to
just set the files up manually.&lt;/p&gt;

&lt;!--excerpt--&gt;

&lt;h1&gt;The MineClone2 Skins Mod&lt;/h1&gt;

&lt;p&gt;MineClone2 has a built-in skins mod (remember that minetest games are
collections of mods), but it only includes two skins by default. The skins are
located in the &lt;code&gt;mineclone2&lt;/code&gt; game folder under &lt;code&gt;mods/PLAYER/mcl_skins&lt;/code&gt;, so on our
Raspbian server it will be located at&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;/var/games/minetest-server/.minetest/games/mineclone2/mods/PLAYER/mcl_skins
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;This is the root folder for the minetest skins mod.  Each skin requires 2 files
and 1 optional file.  Each skin requires&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;code&gt;textures/mcl_skins_character_N.png&lt;/code&gt; -- the actual skin file&lt;/li&gt;
&lt;li&gt;&lt;code&gt;textures/mcl_skins_player_N.png&lt;/code&gt; -- the preview of the skin file that you'll see in the picker&lt;/li&gt;
&lt;li&gt;&lt;code&gt;meta/mcl_skins_character_N.txt&lt;/code&gt; -- the text description of the skin (optional)&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;where N is the skin's number.  The skins are sequentially numbered wih no gaps -
so I had skins 1 through 94.  If you have a gap in the number mcl_skins will
stop searching.&lt;/p&gt;

&lt;p&gt;&lt;img src="http://www.pxtl.ca/images/2020-05-30-Mineclone2-skins/files.jpg" alt="example files" /&gt;&lt;/p&gt;

&lt;h2&gt;The meta txt file&lt;/h2&gt;

&lt;p&gt;One of the three files is the meta text description of the skin.  It seems to only
ever contain 2 lines:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;name = "Example_skin",
author = "exampleauthor",
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;I'm a stickler for credit so I always included the author name, but the
MineClone2 skin picker didn't seem to show it anywhere.&lt;/p&gt;

&lt;h1&gt;The source&lt;/h1&gt;

&lt;p&gt;Mineclone2 skins are downloaded from the &lt;a href="http://minetest.fensta.bplaced.net/"&gt;skins
db&lt;/a&gt;. Pick the skins you like, download the
skin file and then rclick-save to download the thumbnail.&lt;/p&gt;

&lt;h1&gt;The process&lt;/h1&gt;

&lt;p&gt;So basically, our way to manually set up the skins is&lt;/p&gt;

&lt;p&gt;1) On the &lt;a href="http://minetest.fensta.bplaced.net/"&gt;skins website&lt;/a&gt;, download the
   skin and thumbnail of the skin you like.&lt;/p&gt;

&lt;p&gt;2) Rename the thumbnail and skin to match the mineclone2 skin-mod standard,
   being sure to copy out the part of the name that includes the author and
   skin-name.&lt;/p&gt;

&lt;p&gt;3) Create a meta txt file with the name and author as described above.&lt;/p&gt;

&lt;p&gt;4) Upload the files to your server and put them into the correct folder.&lt;/p&gt;

&lt;p&gt;You shouldn't need to &lt;code&gt;chmod&lt;/code&gt;/&lt;code&gt;chown&lt;/code&gt; anything because the minetest server users
only need to read the files.&lt;/p&gt;

&lt;h1&gt;Next time&lt;/h1&gt;

&lt;p&gt;Readdyyyy toooooo Mummmbbblle!&lt;/p&gt;
</a10:content></item><item><guid isPermaLink="true">http://www.pxtl.ca/2020/05/23/minetest-mods/</guid><link>http://www.pxtl.ca/2020/05/23/minetest-mods/</link><author>pxtl@hotmail.com</author><category>Software</category><title>Minetest Mods (rpi minetest-server part 3)</title><description>&lt;p&gt;Now that we've got our Minetest server built (see &lt;a href="http://www.pxtl.ca/2020/05/12/minetest-pi4-recipe/"&gt;previous
entry&lt;/a&gt; ), now it's time to learn how to
install mods and games into it, and how to run multiple instances of minetest.
In particular, we're going to be installing Mineclone 2.&lt;/p&gt;

</description><pubDate>Sat, 23 May 2020 04:00:00 Z</pubDate><a10:updated>2020-05-23T04:00:00Z</a10:updated><a10:content type="html">&lt;p&gt;Now that we've got our Minetest server built (see &lt;a href="http://www.pxtl.ca/2020/05/12/minetest-pi4-recipe/"&gt;previous
entry&lt;/a&gt; ), now it's time to learn how to
install mods and games into it, and how to run multiple instances of minetest.
In particular, we're going to be installing Mineclone 2.&lt;/p&gt;

&lt;!--excerpt--&gt;

&lt;h1&gt;Mods and Games in Minetest&lt;/h1&gt;

&lt;p&gt;First off, you have to understand how minetest manages content.  Minetest has
two concepts: &lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;mods&lt;/strong&gt;: small bits of code that will add one feature to a game.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;games&lt;/strong&gt;: big, mutually-exclusive affairs that will bundle many mods together
and act as a basis for more mods.  Also sometimes called a "subgame".&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Next, we have to consider two &lt;strong&gt;games&lt;/strong&gt;:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Minetest Game&lt;/strong&gt;: the basic standard game for Minetest.  It's a
hyper-simplified version of Minecraft with no mobs or anything.   This is the
basis for most Minetest mods - most Minetest mods are only playable on
&lt;strong&gt;Minetest game&lt;/strong&gt;.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Mineclone 2&lt;/strong&gt;: a game for mineclone that makes the game stylistically and
gameplay-wise as similar to Minecraft as is feasible.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Minetest games and mods are typically downloaded from the Minetest &lt;a href="https://content.minetest.net/"&gt;Content
DB&lt;/a&gt;), which has a nice, easy-to-use browser built
into Minetest.&lt;/p&gt;

&lt;p&gt;However, the contentDB downloader is designed to be used from the offline client
- it can be executed within our online dedicated server running on the Pi4.  So
  we have to deploy the mods and games into Minetest &lt;em&gt;manually&lt;/em&gt;.  Fortunately,
  it's not as bad as all that.&lt;/p&gt;

&lt;h1&gt;Mods and Games in minetest-server on Raspbian/Debian&lt;/h1&gt;

&lt;p&gt;The meat of the work we're going to be doing is in
&lt;code&gt;/var/games/minetest-server/.minetest&lt;/code&gt;.  Note that &lt;code&gt;.minetest&lt;/code&gt; is a dot-folder,
and so is hidden from &lt;code&gt;ls&lt;/code&gt; unless you use &lt;code&gt;ls -a&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;There are three directories within the "minetest" directory that we care about.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;.minetest    
├── games
├── mods
└── worlds
    └── world
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;These same three directories exist on your local copy of minetest running on
your Windows machine (or Android tablet), and will contain the same kind of
files.&lt;/p&gt;

&lt;p&gt;What this means is that you can download and debug mods using the "Content DB"
system in the minetest client, and then deploy the packaged-up game or world up
to the minetest server.&lt;/p&gt;

&lt;p&gt;However, to start we're going to keep it simple.  We're going to download
MineClone 2, create a world with it, and then deploy it to our server.&lt;/p&gt;

&lt;h2&gt;Warning about the worlds folder&lt;/h2&gt;

&lt;p&gt;Until we're setting up multiple servers and I'll go into more details, a word of
warning: The only folder in your &lt;code&gt;worlds&lt;/code&gt; folder on the Pi4 minetest-server can
be &lt;code&gt;world&lt;/code&gt;.  We'll get into more elaborate changes later.  For now - if you put
anything else in that folder, minetest-server stops working.&lt;/p&gt;

&lt;h1&gt;Getting Started with MineClone 2&lt;/h1&gt;

&lt;p&gt;&lt;a href="https://forum.minetest.net/viewtopic.php?t=16407"&gt;MineClone 2 can be downloaded from the minetest
forum&lt;/a&gt; where its development
is publicly run, but &lt;a href="https://content.minetest.net/packages/Wuzzy/mineclone2/"&gt;it can also be obtained from
contentdb&lt;/a&gt;, and the
forum crashes pretty often.&lt;/p&gt;

&lt;p&gt;Download it and unzip it into your &lt;code&gt;minetest\games&lt;/code&gt; folder on your Windows PC.
Or you can fetch it from minetest contentdb itself, but we're going to use the
process I used when setting up.  So, for example, if minetest is in &lt;code&gt;c:\games&lt;/code&gt;,
then you should have &lt;code&gt;c:\games\minetest\games\mineclone2&lt;/code&gt;.  Remember this is an
opensource project, which means linux, which means case-sensitive filepaths. Get
used to thinking in all-lower-case.&lt;/p&gt;

&lt;p&gt;Create a new world in minetest, using "Start Game" --&gt; "New"&lt;/p&gt;

&lt;p&gt;&lt;img src="http://www.pxtl.ca/images/2020-05-23-Minetest-mods/minetest-new-world.jpg" alt="Minetest new world
screen" /&gt;&lt;/p&gt;

&lt;p&gt;Select the "MineClone 2" game, provide a seed (I recommend &lt;code&gt;6&lt;/code&gt;, because I found
it had a pleasent starting area) and a name (call it "world" - I'll explain why
later), and click "Create". This will make our new Mineclone world.&lt;/p&gt;

&lt;p&gt;Now we have the mod and the world running on our local copy of Minetest and we
can deploy it to our server.&lt;/p&gt;

&lt;h1&gt;Deploying MineClone 2 and our new World&lt;/h1&gt;

&lt;h2&gt;Moving files onto the Pi4&lt;/h2&gt;

&lt;p&gt;We'll be using &lt;code&gt;WinSCP&lt;/code&gt; to copy the files to our server.  We can't deploy them
&lt;em&gt;direct&lt;/em&gt; to the target location because of permissions, so we'll copy them to
the "downloads" folder and then go from there.&lt;/p&gt;

&lt;p&gt;Use &lt;code&gt;WinSCP&lt;/code&gt; and your &lt;code&gt;pi&lt;/code&gt; credentials to connect to the pi server.  Let's
create a "minetest" folder under &lt;code&gt;/home/pi/Downloads&lt;/code&gt; (aka &lt;code&gt;~/Downloads&lt;/code&gt;). Then,
move our world and the game in there using the WinSCP upload command.&lt;/p&gt;

&lt;p&gt;&lt;img src="http://www.pxtl.ca/images/2020-05-23-Minetest-mods/winscp.jpg" alt="WinSCP" /&gt;&lt;/p&gt;

&lt;p&gt;So after uploading, we should have &lt;code&gt;/home/pi/Downloads/minetest/world&lt;/code&gt; and
&lt;code&gt;/home/pi/Downloads/minetest/mineclone2&lt;/code&gt;.&lt;/p&gt;

&lt;h2&gt;Moving files around on the Pi4&lt;/h2&gt;

&lt;p&gt;Now that's the end of GUI work, time to switch to our console.  Connect a
terminal to the Pi4 server using PutTTY.  We're going to copy some files around.&lt;/p&gt;

&lt;p&gt;First, we have to stop our minetest server so that it doesn't complain when we
start moving things around.  &lt;code&gt;sudo systemctl stop minetest-server&lt;/code&gt;.  Our
minetest server is shut down.&lt;/p&gt;

&lt;p&gt;Now let's get started with the files &lt;code&gt;cd /var/games/minetest-server/.minetest/&lt;/code&gt;
and then &lt;code&gt;sudo mkdir backup&lt;/code&gt;. We're going to make a backup folder for our extra
worlds and the like. Next we have to remove the existing world so we can replace
it with our mineclone2 world.  &lt;code&gt;sudo mv ./worlds/world/ backup&lt;/code&gt; will move the
world into the backup folder.&lt;/p&gt;

&lt;p&gt;Next, let's move in our new world and our new game.&lt;/p&gt;

&lt;p&gt;If there isn't a folder called &lt;code&gt;games&lt;/code&gt; yet, &lt;code&gt;sudo mkdir games&lt;/code&gt;.  Next, we'll
bring in mineclone2:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;sudo mv /home/pi/Downloads/minetest/mineclone2 ./games/
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Then, we'll bring in our world&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;sudo mv /home/pi/Downloads/minetest/world ./worlds/
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Now we've copied the files over.&lt;/p&gt;

&lt;h2&gt;Permissions&lt;/h2&gt;

&lt;p&gt;Now we have to transfer ownership of these 2 folders to the minetest-server
user, &lt;code&gt;Debian-minetest&lt;/code&gt; of group &lt;code&gt;games&lt;/code&gt;.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt; sudo chown Debian-minetest:games ./games/mineclone2 -R
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;The &lt;code&gt;-R&lt;/code&gt; means &lt;code&gt;--recursive&lt;/code&gt;.  Now the world&lt;/p&gt;

&lt;pre&gt;&lt;code&gt; sudo chown Debian-minetest:games ./games/world -R
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;And now we're ready.   Let's restart the server.&lt;/p&gt;

&lt;h2&gt;Restart the World&lt;/h2&gt;

&lt;pre&gt;&lt;code&gt;sudo systemctl start minetest-server
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;And we're up.  On your desktop minetest, connect to the server.&lt;/p&gt;

&lt;p&gt;Note that by default minetest stores credentials inside the world folder so we
blew away all our users... you might have to restart with fresh users again.&lt;/p&gt;

&lt;p&gt;You should find your world up and running.&lt;/p&gt;

&lt;p&gt;Again, if anything's funny, check &lt;code&gt;tail /var/log/minetest/minetest.log&lt;/code&gt; for
information about your server.&lt;/p&gt;

&lt;h1&gt;Mods&lt;/h1&gt;

&lt;p&gt;Mods are deployed by the same process as games, but with an extra feature - each
mod is referenced by the World.  You can see this in the Minetest gui when
configuring a world - you've a long list of mods you can toggle on and off.  In
the file-structure, enter your &lt;code&gt;worlds/worldname&lt;/code&gt; folder and open &lt;code&gt;world.mt&lt;/code&gt; in
Nano (&lt;code&gt;sudo nano world.mt&lt;/code&gt;).  Then to enable a mod that's been installed into
your &lt;code&gt;mods&lt;/code&gt; folder, add a line to the file stating &lt;code&gt;load_mod_&amp;lt;modname&amp;gt; = true&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;&lt;a href="https://dev.minetest.net/Installing_Mods"&gt;More information on this process is
here&lt;/a&gt;&lt;/p&gt;

&lt;h1&gt;More Worlds!&lt;/h1&gt;

&lt;p&gt;At this point we've covered most of the ways running a minetest server is
different from running it locally and so you're off to the races... but what if
you want to run more than one?&lt;/p&gt;

&lt;p&gt;This is where we go back into working with Debian/systemd.  In order to run more
worlds, we're going to run a second minetest-server instance.&lt;/p&gt;

&lt;h2&gt;Fixing the Minetest World Folder&lt;/h2&gt;

&lt;p&gt;Okay, first we need to get into the weeds.  By default minetest runs the world
named &lt;code&gt;world&lt;/code&gt;, right?  That is, the world located at
&lt;code&gt;/var/games/minetest-server/.minetest/worlds/2-mineclone-survival/&lt;/code&gt;, right?&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;&lt;em&gt;WRONG&lt;/em&gt;&lt;/strong&gt;.&lt;/p&gt;

&lt;p&gt;Minetest-server by default &lt;em&gt;names&lt;/em&gt; the folder "world".  But what it actually runs
is "the only world folder in &lt;code&gt;/var/games/minetest-server/.minetest/worlds/&lt;/code&gt;".
What does that mean if there's 2 folders in
&lt;code&gt;/var/games/minetest-server/.minetest/worlds/&lt;/code&gt;?  Crashy crashy.  And we're going
to put a second world in there!  So before we do that, we have to make the
implicit explicit and tell minetest where to find our &lt;em&gt;first&lt;/em&gt; world.&lt;/p&gt;

&lt;p&gt;Before we start, &lt;/p&gt;

&lt;pre&gt;&lt;code&gt;sudo systemctl stop minetest-server
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Okay, we're ready to operate.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;sudo nano /etc/minetest/minetest.conf
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Now, look for &lt;code&gt;map-dir&lt;/code&gt; and set it as follows&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;map-dir = /var/games/minetest-server/.minetest/worlds/world/
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Now it no longer has to &lt;em&gt;guess&lt;/em&gt; where to find the world, it has an exact
location.  So we can create a 2nd world-folder and not confuse it.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;sudo systemctl start minetest-server
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;And check to make sure everything's hunky dory with our existing server.&lt;/p&gt;

&lt;h2&gt;Creating a new Config File&lt;/h2&gt;

&lt;p&gt;To get started on our 2nd world, we need to create a new config file.  We
already have &lt;code&gt;/etc/minetest/minetest.conf&lt;/code&gt;, we're going to be copying that file
into a new 2nd file for our 2nd minetest server instance.  We can name it
whatever we like, but I like to name my worlds starting with their port number.
This is going to run on port 30002, so we'll call it &lt;code&gt;2-mineclone-survival&lt;/code&gt;,
since our first world was creative.  Well, mine was.  If yours wasn't, feel free
to make your 2nd world whatever else.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;sudo cp /etc/minetest/minetest.conf /etc/minetest/2-mineclone-survival.conf
sudo nano /etc/minetest/2-mineclone-survival.conf
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;This will create our 2nd file and edit it.  This will work much the same as the
first time &lt;em&gt;except&lt;/em&gt; we need to give it a new world-folder since our other
world-folder is already in use, and set a port.&lt;/p&gt;

&lt;p&gt;First, look for &lt;code&gt;port&lt;/code&gt; and set it as follows&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;port = 30002
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Next, look for &lt;code&gt;map-dir&lt;/code&gt; and set it as follows&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;map-dir = /var/games/minetest-server/.minetest/worlds/2-mineclone-survival/
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Now, my world is named &lt;code&gt;2-mineclone-survival&lt;/code&gt; but you do you.  Now, mineclone
doesn't need to edit this file, so we don't have to &lt;code&gt;chmod&lt;/code&gt; or &lt;code&gt;chown&lt;/code&gt; it or
anything.  That file is ready.&lt;/p&gt;

&lt;h2&gt;Forwarding ports&lt;/h2&gt;

&lt;p&gt;Remember earlier I told you that you &lt;em&gt;had&lt;/em&gt; to forward 30000, but I recommended
doing 30000-30010?  If you didn't take my advice, take it now.  We're setting up
a service on 30002, you need to forward that on your router.&lt;/p&gt;

&lt;h2&gt;Creating your 2nd world&lt;/h2&gt;

&lt;p&gt;So, next step is up to you.  If you want to let minetest &lt;em&gt;create&lt;/em&gt; your 2nd world
for you, it should do that based on the settings in your conf file.  I haven't
tried that.  But if you have opinions on seed and want to hand-craft it in the
minetest client, then you can go through the previous process of deploying the
world into &lt;code&gt;2-mineclone-survival&lt;/code&gt;.  Create it, move it into place, &lt;code&gt;chown&lt;/code&gt; it,
etc.&lt;/p&gt;

&lt;h2&gt;Registering the Server&lt;/h2&gt;

&lt;p&gt;There's a simple command to create a 2nd server-instance:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;systemctl start minetest-server@2-mineclone-survival.service
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;You'll notice that I've used "2-mineclone-survival" again.  That name &lt;em&gt;must&lt;/em&gt;
match the name of your conf file.  So if you named your 2nd conf file "fred"?
&lt;code&gt;minetest-server@fred.service&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Anyhow, that &lt;em&gt;should&lt;/em&gt; be it.  2nd world is up and running.  Go see the server
browser and you should find two worlds on your address, one on 30000 and one on
30002.&lt;/p&gt;

&lt;p&gt;And you're done!&lt;/p&gt;

&lt;h1&gt;Next Time&lt;/h1&gt;

&lt;p&gt;&lt;a href="http://www.pxtl.ca/2020/05/30/2020-05-30-Mineclone2-skins/"&gt;The skinny on skins.&lt;/a&gt;&lt;/p&gt;
</a10:content></item><item><guid isPermaLink="true">http://www.pxtl.ca/2020/05/12/minetest-pi4-recipe/</guid><link>http://www.pxtl.ca/2020/05/12/minetest-pi4-recipe/</link><author>pxtl@hotmail.com</author><category>Software</category><title>Minetest Pi4 Recipe (rpi minetest-server part 2)</title><description>&lt;p&gt;Continuing from my &lt;a href="http://www.pxtl.ca/2020/05/05/minetest-birthday/"&gt;previous article&lt;/a&gt; on my
daughter's Minetest birthday party, here's how I built my Raspberry Pi 4
minetest server that powered the party.  To be clear: this is only my second
time this century setting up a linux-based server from scratch, so I'm pretty
novice at this.  I'm handy with a terminal console but only on Windows.  The
intended reader of this article is... well, somebody like me.  Somebody new to
Linux but very comfy with Windows.&lt;/p&gt;

</description><pubDate>Tue, 12 May 2020 04:00:00 Z</pubDate><a10:updated>2020-05-12T04:00:00Z</a10:updated><a10:content type="html">&lt;p&gt;Continuing from my &lt;a href="http://www.pxtl.ca/2020/05/05/minetest-birthday/"&gt;previous article&lt;/a&gt; on my
daughter's Minetest birthday party, here's how I built my Raspberry Pi 4
minetest server that powered the party.  To be clear: this is only my second
time this century setting up a linux-based server from scratch, so I'm pretty
novice at this.  I'm handy with a terminal console but only on Windows.  The
intended reader of this article is... well, somebody like me.  Somebody new to
Linux but very comfy with Windows.&lt;/p&gt;

&lt;!--excerpt--&gt;

&lt;h1&gt;Hardware&lt;/h1&gt;

&lt;h2&gt;Pi Hardware&lt;/h2&gt;

&lt;ul&gt;
&lt;li&gt;&lt;a href="https://www.buyapi.ca/product/raspberry-pi-4-model-b-2gb/"&gt;2GB Raspberry Pi4 with official USB
power-supply&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;32GB microSD card (some name-brand one; never buy no-name SDs on Amazon,
they'll only break your heart)
&lt;ul&gt;
&lt;li&gt;good brands: Kingston, Samsung, Patriot, etc.&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.amazon.ca/Miuzei-Raspberry-Cooling-Aluminum-Model/dp/B07WJ8KHS6"&gt;Miuzei air-cooled case kit (includes heat-sinks and
fan)&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;like all off-brand stuff on Amazon, individual listings are ephemeral, so
you may have to search for a different listing. I paid $15CAD.&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;Ethernet cable&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;The Miuzei case comes with good easy-to-follow instructions for assembly.  There
are two possible configurations of the fan, a low-power mode and a high-power
mode.  We used the low-power mode, even on an overclocked emulation box.  It's
more than enough for our minetest server.&lt;/p&gt;

&lt;h2&gt;Supporting Hardware&lt;/h2&gt;

&lt;p&gt;This stuff you'll need for the setup process.&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;A computer capable of running PuTTY and Minetest
&lt;ul&gt;
&lt;li&gt;I've also done some of this this from Linux and Android (don't recommend
that), but I'm going to be using Windows tools.&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;Spare keyboard&lt;/li&gt;
&lt;li&gt;Spare mouse&lt;/li&gt;
&lt;li&gt;Spare monitor/TV with HDMI hookup
&lt;ul&gt;
&lt;li&gt;Note the Pi4 uses micro-HDMI, which is &lt;em&gt;not&lt;/em&gt; common. I bought &lt;a href="https://www.amazon.ca/Cable-Matters-Plated-Female-Adapter/dp/B00JDRHQ58"&gt;these
adapters&lt;/a&gt;
for my Pi devices.&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;Wifi or ethernet accessible to the location with all the above equipment.&lt;/li&gt;
&lt;li&gt;A router you're comfy setting port-forwarding and static-IPs on.  You might
need to Google how to do that on your router.&lt;/li&gt;
&lt;/ul&gt;

&lt;h1&gt;OS Setup&lt;/h1&gt;

&lt;p&gt;You can download-and-burn the image onto a MicroSD using &lt;a href="https://www.raspberrypi.org/downloads/"&gt;Raspberry Pi
Imager&lt;/a&gt;, but I prefer to download the
image manually and burn it to the MicroSD using &lt;a href="https://www.balena.io/etcher/"&gt;Balena
Etcher&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;Once you have the image burned and inserted into the Pi, you'll need to get it
set up for remoting - but the first time it's going to need a mouse, keyboard,
and HDMI-connected monitor until we can setup remoting.  I plugged the setup
into a TV and mouse/keyboard. For operating system: The system is running
Raspbian Buster (Raspbian is the Linux variant, Buster is the version number).&lt;/p&gt;

&lt;p&gt;Raspbian will walk through a pretty easy wizard after startup to connect to wifi
and set a password.&lt;/p&gt;

&lt;h2&gt;Remoting&lt;/h2&gt;

&lt;p&gt;The first step to setting up remoting is getting a static IP bound to your
raspi.  &lt;/p&gt;

&lt;p&gt;Open a terminal and run the command.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;ifconfig
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;will list your IP addresses and MAC addresses.  The you want &lt;code&gt;eth0&lt;/code&gt; for wired,
and &lt;code&gt;wlan0&lt;/code&gt; for wireless.  The ipv4 address we're focusing on will be labeled
&lt;code&gt;inet&lt;/code&gt;, and the mac address will be labeled &lt;code&gt;ether&lt;/code&gt; - the ipv4 address will be
generally be of the form &lt;code&gt;192.168.something.something&lt;/code&gt;.  The next steps are
router-specific: write down the &lt;code&gt;ether&lt;/code&gt; MAC info from &lt;code&gt;ifconfig&lt;/code&gt; and use it to
set up static IP for your router - still local, we're still in
&lt;code&gt;192.168.something.something&lt;/code&gt;, but we need a static one that won't change every
time we reboot.  I generally set my router to start dynamic IP addresses at
&lt;code&gt;192.168.1.100&lt;/code&gt; and use numbers &lt;code&gt;192.168.1.10&lt;/code&gt; to &lt;code&gt;192.168.1.99&lt;/code&gt; for any
computer I want to give a static address. This will make port forwarding easier
in the future. The only wrinkle is that the wifi and ethernet interfaces will
each have their own MAC address and IP, and you'll have to decide which you want
to static bind.&lt;/p&gt;

&lt;p&gt;The important steps afterwards are to enable SSH and the VNC Server.  &lt;/p&gt;

&lt;p&gt;Again, in the terminal type&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;sudo raspi-config
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;This will launch a simple UI for editing settings.  Use in "interface options"
enable SSH and VNC.  VNC will let you remote in for a GUI and SSH will let you
remote a terminal/text-console and file-transfers in.&lt;/p&gt;

&lt;h2&gt;Remoting Clients&lt;/h2&gt;

&lt;p&gt;You need to install some remote admin software on your PC if you don't have it
already:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;RealVNC (gui remoting)&lt;/li&gt;
&lt;li&gt;PuTTY (terminal remoting)&lt;/li&gt;
&lt;li&gt;WinSCP (file transfer)&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;All are available from &lt;a href="https://ninite.com/"&gt;ninite.com&lt;/a&gt;.  Personally I prefer
mRemoteNG to PuTTY, but it's got a less memorable name and a more elaborate UI.&lt;/p&gt;

&lt;p&gt;Confirm that you can connect PuTTY and RealVNC to your new Pi server.  You'll
need to use the IP address you set up on your router and the username (pi,
generally) and password you set up earlier in the Raspbian setup wizard.&lt;/p&gt;

&lt;h2&gt;Moving into headless mode&lt;/h2&gt;

&lt;p&gt;At this point, your pi is now ready to be remote-only.  Unhook it from the
mouse, keyboard, and monitor and put it in its final resting place, and wire it
up with just ethernet and power.  You may have to tweak your Router settings to
switch over from Wifi to wired for static IP if you're going from a wireless
connection to wired (I actually forgot this step, so all my traffic to my pi4
was going over wifi even though it was plugged in).&lt;/p&gt;

&lt;h1&gt;Using the Terminal to hook into the Debian Buster Backports software repository&lt;/h1&gt;

&lt;p&gt;Before we can install the minetest server, we have a problem: Raspbian and
Debian Buster tend to have somewhat stale software.  We need a fresher version
of Minetest, so we're going to link up to the buster-backports system for that.&lt;/p&gt;

&lt;h2&gt;Welcome to the terminal&lt;/h2&gt;

&lt;p&gt;We're going to be doing all this in the terminal.  On your desktop, open up
PuTTY, connect to your Pi4 device using the static-IP, the pi username, and the
password.  The linux terminal isn't as scary as you think -- after all, by
default it's so locked down you can't actually do any damage without &lt;code&gt;sudo&lt;/code&gt;,
which is basically Linux' way of saying "this line does something scary".  &lt;/p&gt;

&lt;p&gt;We'll be using &lt;code&gt;sudo&lt;/code&gt; a lot.&lt;/p&gt;

&lt;p&gt;&lt;a href="https://en.wikibooks.org/wiki/Guide_to_Unix/Commands/File_System_Utilities"&gt;The basic list of commands we'll be working with are listed
here&lt;/a&gt;.
In particular, &lt;code&gt;cd&lt;/code&gt;, &lt;code&gt;ls&lt;/code&gt;, &lt;code&gt;cp&lt;/code&gt;, &lt;code&gt;mv&lt;/code&gt;, &lt;code&gt;rm&lt;/code&gt;, &lt;code&gt;chmod&lt;/code&gt; and &lt;code&gt;chown&lt;/code&gt;.  Be fearless
and stupid.  We're mostly just installing software and tweaking some files.
Worst case scenario, don't be afraid to wipe the thing and start over.&lt;/p&gt;

&lt;h2&gt;Hooking into Buster-Backports&lt;/h2&gt;

&lt;p&gt;As mentioned earlier, raspbian Buster is &lt;em&gt;almost&lt;/em&gt; Debian.  Debian being a large,
popular Linux software distro, has an extensive library of programs available
for it.  And Raspbian can run Debian software... but by default, it's not hooked
up to access Debian's latest software apt software repository.  For this
Raspbian Buster device, the repository we need to connect to is called "Buster
Backports", which is to say back-ports of cutting-edge software to the "stable"
Buster version of Raspbian/Debian.&lt;/p&gt;

&lt;p&gt;So, first, we need to let Raspbian know it's safe to talk to the Backports repo.&lt;/p&gt;

&lt;p&gt;In our terminal, we run the following:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-keys E0B11894F66AEC98
sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 7638D0442B90D010
sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 8B48AD6246925553
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;I'm going to be honest, I don't know what it actually does in detail, and
generally copying pasting sudo commands into your machine is a bad idea,
especially stuff involving security keys.  But in this case, its's obviously
wiring into a something provided by Ubuntu, who being one of the big daddies of
Linux right now I tend to trust.&lt;/p&gt;

&lt;p&gt;If you're new to linux and PuTTY: &lt;code&gt;right-click&lt;/code&gt; or &lt;code&gt;shift&lt;/code&gt;+&lt;code&gt;insert&lt;/code&gt; means paste.
That'll be handy for copying commands from here to paste in there.&lt;/p&gt;

&lt;p&gt;Next, we add the &lt;code&gt;buster-backports&lt;/code&gt; repository to the registry of apt
installation sources.  This mammoth command adds the configuration to connect to
"buster-backports" into our sources list for installing software.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;echo 'deb http://httpredir.debian.org/debian buster-backports main contrib non-free' | sudo tee -a /etc/apt/sources.list.d/debian-backports.list
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;This script I can explain.  Skip this if you're experienced in the ways of
Linux.  &lt;code&gt;echo 'deb http://yadda&lt;/code&gt; just means "output the quoted text" the &lt;code&gt;|&lt;/code&gt;
means "take the output of the command on the left of the &lt;code&gt;|&lt;/code&gt; and shove it into
the command on the right.  &lt;code&gt;tee -a somefilepath&lt;/code&gt; means "open somefilepath and
append the stuff shoved into this command at the end of that file and also echo
it to the screen so we can see it".  So we're taking the quoted line and
stuffing it at the end of the file &lt;code&gt;debian-backports.list&lt;/code&gt;, which will
effectively add the buster backports repository to our sources list so we can
now install software from there.&lt;/p&gt;

&lt;p&gt;Now, we have to let the "apt" installation system know that there's the new
source available to it, so we'll do&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;sudo apt-get update
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;and finally we're ready to start installing software.&lt;/p&gt;

&lt;h1&gt;Installing and Configuring minetest-server&lt;/h1&gt;

&lt;p&gt;I worked heavily from &lt;a href="https://wiki.minetest.net/Setting_up_a_server/Debian"&gt;this guide on the minetest
wiki&lt;/a&gt; but found it didn't
have much context for a novice like me so I'm going to slow it down and give you
a deep dive on the linuxisms involved.&lt;/p&gt;

&lt;h2&gt;Minetest-server, systemd, and an intro to file permissions&lt;/h2&gt;

&lt;p&gt;We're not going to do raw minetest, but rather "minetest-server" which installs
minetest &lt;em&gt;and&lt;/em&gt; sets it up into the service system in Raspbian so it runs
securely with its own user (the user &lt;code&gt;Debian-minetest&lt;/code&gt; of group &lt;code&gt;games&lt;/code&gt;).  The
only warning is that this server-daemon approach means that a lot of the support
documents about minetest are going to be confusing for you because &lt;em&gt;we never
actually run minetest&lt;/em&gt;, which is something the docs talk about a lot.  Instead,
we tell &lt;code&gt;systemd&lt;/code&gt;, Raspbian's service manager, to do that for us.  It does on
startup and handles the details. Helpful, but opaque.&lt;/p&gt;

&lt;h3&gt;Quick intro to file-permissions and Linux users&lt;/h3&gt;

&lt;p&gt;One wrinkle about this is that our &lt;code&gt;pi&lt;/code&gt; user isn't actually involved in running
the software.  Minetest-server actually uses its own linux user - so there's a
separate account responsible for running the server, and any time it needs to
look at a file we have to grant permission or ownership to that user to muck
with that file.&lt;/p&gt;

&lt;p&gt;So we're going to be needing to get acquainted with some linux commands.  We
won't be using them much until we really get into the weeds with our minetest
server, but for now you should meet them.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;chown&lt;/code&gt; is "change file owner/group".  We need to use this to assign ownership
of a file or folder to our service-user, who is named &lt;code&gt;Debian-minetest&lt;/code&gt; of group
&lt;code&gt;games&lt;/code&gt;.  So to assign a file to &lt;code&gt;Debian-minetest&lt;/code&gt;, we do&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;sudo chown Debian-minetest:games &amp;lt;filename&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Optionally with a &lt;code&gt;--recursive&lt;/code&gt; flag if you want to do it to every file in a
directory-tree.&lt;/p&gt;

&lt;p&gt;Similarly, to grant permissions for that user, we're going to use &lt;code&gt;chmod&lt;/code&gt;, which
is "change mode" but is really about modifying file permissions.&lt;/p&gt;

&lt;p&gt;You'll notice we usually call commands with &lt;code&gt;-&lt;/code&gt; parameters, but in the case of
&lt;code&gt;chmod&lt;/code&gt;, we use &lt;code&gt;+&lt;/code&gt; parameters - this is something I have not gotten used to
since it is &lt;em&gt;not&lt;/em&gt; a thing in windows/powershell scripting.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;sudo chmod +rwx &amp;lt;filename&amp;gt;
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;This grants the owner &lt;strong&gt;r&lt;/strong&gt;ead, &lt;strong&gt;w&lt;/strong&gt;rite, and e&lt;strong&gt;x&lt;/strong&gt;ecute permissions to a
file.&lt;/p&gt;

&lt;p&gt;Again, you can use a directory (or a wildcard like *) instead of a filename, and
you can have it do the action to everything in the directory tree by using
&lt;code&gt;--recursive&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;Finally, &lt;code&gt;ls&lt;/code&gt; is how to list the contents of a directory, but we want &lt;code&gt;ls -l&lt;/code&gt; to
list them and show the owner and permissions so we can be sure we did the above
right.&lt;/p&gt;

&lt;p&gt;I know I'm getting pretty deep into the weeds, but file permissions were 99% of
my struggle since they're barely a thing on Windows, so I figured it was worth
breaking it down here before we go any deeper - hopefully if anything goes
sideways, you now have enough to unmangle a file permission or two.&lt;/p&gt;

&lt;h2&gt;Install and config&lt;/h2&gt;

&lt;p&gt;So, install minetest-server from the buster-backports source we just finished
hooking into.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;sudo apt-get -t buster-backports install minetest-server
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;Then create and setup our config file.  That's where a lot of the meat will be
happening - we've got the game installed, but our server is private and
unsecured and all that.  We want something we can &lt;em&gt;control&lt;/em&gt;.  My daughter and
her friends are playing in there.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;#unzip the starting config - I'm pretty sure this step is unnecessary 
#and might ruin privileges on minetest.conf .
#Only do this if /etc/minetest/minetest.conf wasn't created automatically
sudo zcat /usr/share/doc/minetest/minetest.conf.example.gz &amp;gt; /etc/minetest/minetest.conf

#open the config up in the editor to get to work
sudo nano /etc/minetest/minetest.conf
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;The file &lt;code&gt;/etc/minetest/minetest.conf&lt;/code&gt; contains a pretty-well-annotated config
of everything about our minetest server.  The only big gotcha is that you &lt;em&gt;must&lt;/em&gt;
set a &lt;code&gt;bind_address&lt;/code&gt; to make your server accessible to anybody.  The default is
0.0.0.0, which is supposed to mean "accept all incoming connections" but somehow
either minetest or systemd get cranky and instead accept &lt;em&gt;no&lt;/em&gt; connections.  So
take that static IP you set on your server way back at the beginning of this
recipe, and put it in &lt;code&gt;bind_address&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Second, you want a password, at least until you're ready to unleash this thing
on the public world.  Set &lt;code&gt;default_password&lt;/code&gt;.  &lt;/p&gt;

&lt;p&gt;You can set a nice name, grant players some default privileges, and publicize it
in the server browser so players can search you out in the listing.&lt;/p&gt;

&lt;p&gt;To start?  Probably focus on &lt;code&gt;bind_address&lt;/code&gt;, a &lt;code&gt;server_name&lt;/code&gt;, the name of your
admin user (&lt;code&gt;name&lt;/code&gt;) and a &lt;code&gt;default_password&lt;/code&gt;.  Maybe decide if you want your
first world to be creative mode or not&lt;/p&gt;

&lt;p&gt;If you've never used &lt;em&gt;Nano&lt;/em&gt; before, it's actually pretty easy in a linuxy way -
normal cursor controls (don't try to mouse-scroll though), but doesn't use
windows-standard hotkeys.  Everywhere in linux, ctrl-C means "break whatever's
going on", so copy-paste is highlight and rclick instead.  Don't try to undo
with ctrl-Z either, that means suspend the current program and switch to console
(&lt;code&gt;fg %1&lt;/code&gt; to come back, meaning put suspended app &lt;strong&gt;1&lt;/strong&gt; back in the
&lt;strong&gt;f&lt;/strong&gt;ore&lt;strong&gt;g&lt;/strong&gt;round).  &lt;code&gt;Ctrl&lt;/code&gt; + the keys listed along the bottom are the hotkeys,
like &lt;code&gt;ctrl&lt;/code&gt;+&lt;code&gt;w&lt;/code&gt; to search, &lt;code&gt;ctrl&lt;/code&gt;+&lt;code&gt;o&lt;/code&gt; to save, &lt;code&gt;ctrl&lt;/code&gt;+&lt;code&gt;x&lt;/code&gt; to quit.&lt;/p&gt;

&lt;p&gt;Finally, our first chmod command:&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;#enable writing of the log file for all users so we can see what’s going on
sudo chmod a+rw /var/log/minetest/minetest.log
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;We need Minetest to be allowed to write to the minetest log file.  The "a" in
that chmod means "all users", we're going to keep this simple.  I know you have
to do this step because I &lt;em&gt;didn't&lt;/em&gt; do it and it errored out when I tried to
start up the server... I don't know, if the file doesn't exist yet just start
the server and then chmod it afterwards. Or like &lt;code&gt;echo '' |
/var/log/minetest/minetest.log&lt;/code&gt; to create it blank.  Whatever.&lt;/p&gt;

&lt;h2&gt;Start it up&lt;/h2&gt;

&lt;p&gt;Now that our Minetest server is installed and configured, it's time to cross our
fingers and start it up.&lt;/p&gt;

&lt;p&gt;First, meet &lt;code&gt;systemctl&lt;/code&gt;.  That's systemd's tool for you to manage services that
it runs for you.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;sudo systemctl start minetest-server
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;This means we let it rip.  For future reference, there's also &lt;code&gt;systemctl stop&lt;/code&gt;
and &lt;code&gt;systemctl restart&lt;/code&gt; that do what they sound like.&lt;/p&gt;

&lt;p&gt;Install the minetest desktop program onto another machine, or even an Android
phone (or hell, vnc into the raspi and install the desktop version of minetest -
it's barely usable but enough to check connections) and try to connect to your
server by the local &lt;code&gt;192.168.something.something&lt;/code&gt; static address.  This will
confirm you've got the minetest server running.  Don't forget your
&lt;code&gt;default_password&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;If it doesn't work?  Check &lt;code&gt;/var/log/minetest/minetest.log&lt;/code&gt;.  You can read the
whole file with the command &lt;code&gt;cat /var/log/minetest/minetest.log&lt;/code&gt;, or just the
very end of the file with &lt;code&gt;tail /var/log/minetest/minetest.log&lt;/code&gt;.  You really
want to see the line&lt;/p&gt;

&lt;p&gt;&lt;code&gt;Server for gameid="minetest" listening on 192.168.something.something:30000.&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;If you don't see it yet, keep checking with &lt;code&gt;tail
/var/log/minetest/minetest.log&lt;/code&gt; for about a minute. If there's an error in
there, take it seriously and try to figure it out.&lt;/p&gt;

&lt;p&gt;If it does work and you connect?  Celebrate!  And while you're in there, log in
with your admin user (the one you set as &lt;code&gt;name&lt;/code&gt; in the minetest.conf) and use
the gui to change their password, since you'll be giving that one away to your
friends.&lt;/p&gt;

&lt;h2&gt;Getting your server into the public internet.&lt;/h2&gt;

&lt;p&gt;We're going to do a bit more tweaking of the minetest.conf, so let's stop the
server for a minute with &lt;/p&gt;

&lt;pre&gt;&lt;code&gt;sudo systemctl stop minetest-server
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;... you're getting the hang of this right?  Remember, use ctrl-R to find old
commands in the history so you're not typing that mouthful over and over again.
Also tab-completion.  Als the up and down keys to find previous commands.&lt;/p&gt;

&lt;p&gt;This part's a bit awkward because I have a domain name pointing at my house, and
you might not have that.  If you do have one, then set that on &lt;code&gt;server-address&lt;/code&gt;
in your minetest.conf to point it there.  Otherwise, leave the &lt;code&gt;server-address&lt;/code&gt;
line commented out with a &lt;code&gt;#&lt;/code&gt;... I've read it &lt;em&gt;should&lt;/em&gt; work but I haven't tried
it myself.&lt;/p&gt;

&lt;p&gt;While you're in minetest.conf, you can also set &lt;code&gt;server_announce = true&lt;/code&gt; because
your server is passworded with a secure password so you won't get random
griefers smashing it up.  You set a &lt;code&gt;default_password&lt;/code&gt;, right?&lt;/p&gt;

&lt;p&gt;Anyways, the next step here is setting up port-forwarding on your router.  By
default, the minetest server runs on port 30000.  That's thirty-thousand, not
three-thousand (had to explain it to my daughter a few times).  In your router,
get all incoming UDP traffic coming to 30000 forwarded to that
192.168.something.something static IP.  Now you're on the public internet.&lt;/p&gt;

&lt;p&gt;Now, let's start it back up.&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;sudo systemctl start minetest-server
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;The system will take a minute to start up - you can tail the log to check on its
progress.  Give it a minute or two and then search of your &lt;code&gt;server-name&lt;/code&gt; in the
minetest desktop GUI server-browser.  Hopefully it's online and you can connect!&lt;/p&gt;

&lt;h1&gt;Yay, it Works!&lt;/h1&gt;

&lt;p&gt;Except that it's just vanilla minetest game.  It's not Mineclone2. Also, where's
our Mumble server, you want me to type chat into the console like a caveman?
Still, at the end of this article, we've got something useful!  You and your
friends can play vanilla Minetest game on your pi4 server now.&lt;/p&gt;

&lt;p&gt;&lt;a href="http://www.pxtl.ca/2020/05/23/2020-05-23-Minetest-mods/"&gt;Next time, more stuff.&lt;/a&gt;&lt;/p&gt;
</a10:content></item><item><guid isPermaLink="true">http://www.pxtl.ca/2020/05/05/minetest-birthday/</guid><link>http://www.pxtl.ca/2020/05/05/minetest-birthday/</link><author>pxtl@hotmail.com</author><category>Blog</category><title>Minetest Birthday (rpi minetest-server part 1)</title><description>&lt;p&gt;Okay, this is part one of a multi-part... well, I guess we can't use the term
"postmortem" that's popular in software development, since it's kind of morbid
for a birthday.  We'll call it an "after-action report".&lt;/p&gt;

&lt;p&gt;Basically, we had to handle the challenge of "how do you run a 10th birthday
party with kids under social distancing"?  My answer was cupcakes, Zoom, a
Raspberry Pi 4, and the open-source clone of Minecraft called
&lt;a href="https://www.minetest.net"&gt;Minetest&lt;/a&gt;.&lt;/p&gt;

</description><pubDate>Tue, 05 May 2020 04:00:00 Z</pubDate><a10:updated>2020-05-05T04:00:00Z</a10:updated><a10:content type="html">&lt;p&gt;Okay, this is part one of a multi-part... well, I guess we can't use the term
"postmortem" that's popular in software development, since it's kind of morbid
for a birthday.  We'll call it an "after-action report".&lt;/p&gt;

&lt;p&gt;Basically, we had to handle the challenge of "how do you run a 10th birthday
party with kids under social distancing"?  My answer was cupcakes, Zoom, a
Raspberry Pi 4, and the open-source clone of Minecraft called
&lt;a href="https://www.minetest.net"&gt;Minetest&lt;/a&gt;.&lt;/p&gt;

&lt;!--excerpt--&gt;

&lt;h1&gt;Preamble&lt;/h1&gt;

&lt;p&gt;So, my daughter is really into Minecraft, in the typical sense that saying
"really into" understates the situation.  I looked into running the party on
name-brand Minecraft, but for a variety of reasons (not all of them good) I
decided to find an alternative.&lt;/p&gt;

&lt;p&gt;So, I looked into an open-source reimplementation of Minecraft called Minetest
that I'd been studiously ignoring, created by hobbyists.  The good news was that
it looked like it would meet my needs.  The bad news was that the installation
process was a lot to ask of parents.  So, a 2-part party was planned:&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;&lt;p&gt;First, a Zoom meeting to say happy-birthday and blow out the candles.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;For those parents who had gotten through the install-and-config process, a
Minetest sandbox for the kids to play in.&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;h1&gt;The Zoom Party&lt;/h1&gt;

&lt;p&gt;So how do you sing Happy Birthday and blow out candles and eat cake at a
birthday party spread across about a dozen households?  Simple, with Zoom, and
&lt;a href="http://www.westdalecupcakes.com/"&gt;Cupcakes of Westdale Village&lt;/a&gt;.  This created
a fun wrinkle that all the children got to order their own personal flavour of
cupcake (and a 2nd-choice in case there was a problem).  So, the day before the
party, we gloved up and put on our masks and delivered cupcakes and goodie bags
to all of our attendees.&lt;/p&gt;

&lt;h2&gt;Cupcakes&lt;/h2&gt;

&lt;p&gt;&lt;img src="http://www.pxtl.ca/images/2020-05-05-Minetest-birthday/cupcake.jpg" alt="Cupcake" /&gt;&lt;/p&gt;

&lt;p&gt;Of course, we had to go back to the shop to  replace a few of the cupcakes
because my son did not understand that (a) the boxes are not sealed shut, and
(b) they have to stay right-side-up.&lt;/p&gt;

&lt;p&gt;Every goody-bag included a candle as well, so every child got to blow out their
own cake as well.&lt;/p&gt;

&lt;h2&gt;Zoom&lt;/h2&gt;

&lt;p&gt;The zoom software actually impresses me, mostly because I've been working with a
lot of the alternatives and they're kind of awful.  A gallery full of screaming
kids, and not using proper headsets, and it works pretty well.  Doing the same
with Mumble creates a nightmarish feedback loop that will feel like being
stabbed in the ear.  Sometimes the audio seems to kick in late, and there's a
lot of latency, and it seems to have a perverse and inexplicable logic for
picking volume for the kids, but it works.&lt;/p&gt;

&lt;p&gt;Zoom seems to be consistently dropping the 40 minute limit for free accounts
over the weekends, which was a big help.  Honestly the biggest thing that
impresses me with zoom, at least on desktop, is that they eschew the normal
setup of accounts and logins and all that process - you download an exe for the
meeting you've been invited to and you're rolling.  No setting up a username and
password, no entering in a meeting ID.  It was the one bit of tech we didn't
have to worry about.&lt;/p&gt;

&lt;p&gt;&lt;img src="http://www.pxtl.ca/images/2020-05-05-Minetest-birthday/zoom_cupcakes.jpg" alt="Zoom Cupcakes" /&gt;&lt;/p&gt;

&lt;p&gt;The kids were ecstatic to see each other.  It was fun for them to catch up,
although it's hard for them to manage a conversation in such a massive group.
They sang happy birthday, although the latency in Zoom makes it mathematically
impossible for anybody to keep in time so it just sounds like shouting.  A great
time was had by all.&lt;/p&gt;

&lt;p&gt;And then we started up the game.&lt;/p&gt;

&lt;h1&gt;Planning The Minetest Party&lt;/h1&gt;

&lt;h2&gt;The Pi4&lt;/h2&gt;

&lt;p&gt;It's my wife's fault, really.  She bought me a Raspberry Pi 3b a year or two ago
and I've gotten the Single-Board Computer bug.  A computer that can do all sorts
of things costs less than almost any individual game I bought as a kid.  I've
since converted my old Pi 3b into a Nintendo emulator for my father-in-law, and
upgraded to a trio of Pi 4 devices for various purposes.  &lt;/p&gt;

&lt;p&gt;One of these Pi 4s lives under my chest of drawers in my bedroom alongside the
wifi access-point and the Phillips Hue box.&lt;/p&gt;

&lt;p&gt;&lt;img src="http://www.pxtl.ca/images/2020-05-05-Minetest-birthday/pi4.jpg" alt="The Pi 4" /&gt;&lt;/p&gt;

&lt;p&gt;I imagine a really weird version of Toy Story under there.&lt;/p&gt;

&lt;p&gt;For the curious:&lt;/p&gt;

&lt;ul&gt;
&lt;li&gt;2GB Raspberry Pi4 &lt;/li&gt;
&lt;li&gt;32GB microSD card (some name-brand one - never buy no-name SDs on Amazon,
they'll only break your heart)&lt;/li&gt;
&lt;li&gt;Official USB power-supply&lt;/li&gt;
&lt;li&gt;Miuzei air-cooled case kit (includes heat-sinks and fan)&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;The case was fun, despite being a no-name Chinese one.  We made two of these.
My son has always fantasized about building a gaming PC so this got him screwing
parts together and taping on the heat-sinks onto the Pi4 devices.  The Miuzei
only cost a two bucks more than the "official" Pi4 case and it looks better and
has a nice silent fan to cool it for overclocking (I don't overclock this one
but the other one I made for my brother is overclocked).&lt;/p&gt;

&lt;p&gt;My son named it Kosmos.  It runs our Minetest world.&lt;/p&gt;

&lt;h2&gt;Setting Up Minetest&lt;/h2&gt;

&lt;p&gt;&lt;a href="https://www.minetest.net"&gt;Minetest&lt;/a&gt; is a free, open-source copy of Minecraft
made by hobbyists.  For fans of Minecraft: yeah, it's a pale shadow of the
original. The problem is that Minecraft has a proliferation of versions.  Tablet
versions, two different PC versions, and two different incompatible server
versions for running worlds. All sold separately.  I didn't want to have to
figure out which version which kids had and figure out what to do there... And
worse, the newer "bedrock" version is only really practically hosted in The
Cloud.  It doesn't let me run the world on my own hardware, and I insist on
ruling my children's game-worlds like an iron-fisted despot.&lt;/p&gt;

&lt;p&gt;So, I gave the hobby-made imitation a try... and found that after installing a
"subgame" called &lt;a href="https://forum.minetest.net/viewtopic.php?t=16407"&gt;MineClone 2&lt;/a&gt;
that makes it a more complete imitation of MineCraft (the stock Minetest subgame
doesn't include animals and monsters), it was a good fit.&lt;/p&gt;

&lt;p&gt;For hardcore minecraft fans: Mineclone 2 is a pale imitation.  The graphics are
a bit uglier, it's a bit slower, the monsters are dumber, animals keep walking
into the river and floating away, there are gaps in the gameplay, and there's no
villages.  But for people who just want to build houses and have a stable of
rabbits, it's more than good enough.  Especially in just "Creative mode" which
turns the game into more interactive lego than an actual game with objectives
and challenges.&lt;/p&gt;

&lt;p&gt;&lt;img src="http://www.pxtl.ca/images/2020-05-05-Minetest-birthday/screenshot_20200503_142525.jpg" alt="Minetest Group Screenshot" /&gt;&lt;/p&gt;

&lt;p&gt;The biggest challenge with minetest is the installation process: it doesn't have
one.  The game is packed up as a raw zip file and you unzip it on your machine.
You have to suss out that the executable lives in the "bin" folder (which makes
perfect sense to nobody but us programmers), and when you run the exe you'll
have to agree to numerous Windows warnings about this unsigned, unverified
program that has been unceremoniously dumped into a folder on your computer and
is asking for network privileges.&lt;/p&gt;

&lt;p&gt;On the other hand, Mineclone 2 also lacks an installation process, but in a good
way: you just connect to my Minetest world and you'll automatically download
Mineclone 2.  Along with the 90 or so skins I've installed into it for the kids
to choose from.  And any other mods the server is running.&lt;/p&gt;

&lt;p&gt;&lt;img src="http://www.pxtl.ca/images/2020-05-05-Minetest-birthday/birthday-banner.jpg" alt="Birthday Banner" /&gt;&lt;/p&gt;

&lt;p&gt;Mineclone 2/Minetest also has an in-game skin-picker and lets you choose your
name.  This seems like a small thing but I've seen too many games of Minecraft
where somebody is borrowing their brother's account or something and nobody
knows who they are because it shows the wrong name.&lt;/p&gt;

&lt;h2&gt;Setting Up Mumble&lt;/h2&gt;

&lt;p&gt;Another server running on my little Pi4 is &lt;a href="https://www.mumble.info/"&gt;Mumble&lt;/a&gt;.  Mumble is a wonderful
open-source voicechat system designed for gaming.  It's fast, low-resource,
low-latency and has a wonderful configuration wizard where it talks you through
getting your computer's microphone configured just right to make sure all your
friends will have the best experience talking to you.&lt;/p&gt;

&lt;p&gt;Everyone &lt;strong&gt;hated&lt;/strong&gt; it.&lt;/p&gt;

&lt;p&gt;The config wizard is difficult, it has a bizarre cryptographic-key-based
authentication system, and we were unable to get it working on our friends' mac.
Most unforgivably it has no echo-cancelling to speak of so when our friends
joined in a dry-run using their straight laptop speaker and microphone instead
of a proper headset, the feedback-loop was ear-splitting.&lt;/p&gt;

&lt;p&gt;I'll still insist it's the right tool for enthusiasts - the sound is crystal
clear and there's none of the delay that causes awkward interrupting and
cross-talk in Zoom.  But not for a birthday party, unless it's a birthday party
full of programmers and gamers where everybody has a good headset.&lt;/p&gt;

&lt;p&gt;When we realized that Mumble was a usability disaster, we changed the plan to
just use Zoom for the minetest game too.  &lt;/p&gt;

&lt;p&gt;I wrote a four-page document for parents about the software we were using for
this party, URLs, passwords, etc.  Three of them were on Mumble.  I should've
realized it when I had to add the section about "configuring push-to-talk" but
I'm stubborn. &lt;/p&gt;

&lt;p&gt;We kept the Mumble server as "plan B" if Zoom didn't work well.&lt;/p&gt;

&lt;h1&gt;The Minetest Party&lt;/h1&gt;

&lt;p&gt;Not everybody could join.  I assume some parents saw the PDF I sent and noped
the heck out of doing tech-support for a 10 year old on a Sunday afternoon and I
don't blame them one bit.  But a good crowd of kids joined the game.&lt;/p&gt;

&lt;p&gt;&lt;img src="http://www.pxtl.ca/images/2020-05-05-Minetest-birthday/g-gaming.jpg" alt="Daughter Playing" /&gt;&lt;/p&gt;

&lt;p&gt;It was a hit.  I had to furiously type teleport commands as fast as I could to
get the kids all into the same area to introduce them and give them the lay of
the land:&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;&lt;p&gt;Explain how to play and the differences between Minetest and Minecraft.
Everybody had it down inside of 10 minutes.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;The world is backed up and we're reverting it after the party so anything you
make is going bye-bye.  This was mostly to prevent any tantrums if my
daughters' meticulously-constructed villages got obliterated.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;How to pick skins.  This was, of course, their first question.&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Also, apparently you can't teleport somebody out of a minecart in minetest.
This was a problem when people would not know how to dismount (look down and
rclick) and my main tool for rescuing trapped and lost kids was teleporting
them.  I had to enlist my son to be assistant-teleporter.&lt;/p&gt;

&lt;p&gt;At the same time, I had to juggle this and try to debug issues with people who
couldn't make it through the installation and game-joining process.  That was
hard - trying to isolate and work with one frustrated parent in a noisy Zoom
room is excruciating.&lt;/p&gt;

&lt;p&gt;&lt;img src="http://www.pxtl.ca/images/2020-05-05-Minetest-birthday/double-screenshot.jpg" alt="Full Screenshot" /&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;note: faces of my daughters' friends redacted.  Also, this is my son's
screenshot, I was answering those support requests in chat on whisper from
another machine.  And yes, my desktop is messy.&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;Zoom got the job done for audio, barely.  My kids are &lt;em&gt;loud&lt;/em&gt;.  I would see my
daughter grabbing the mic of her headset and practically jamming it into her
mouth to holler to her friends to come follow her and explore the underground
minecart tracks.  I kept having to explain to them that they don't have to
shout, their friends' ears are &lt;em&gt;two inches from their mouths&lt;/em&gt;.&lt;/p&gt;

&lt;p&gt;I needed a Tylenol and fresh air after 20 minutes of that.  The kids went on for
2 hours, and I have no idea how they did it.  One challenge I didn't expect was
that, because this was a completely open sandbox - no challenge or objective -
the kids tended to follow just schoolyard rules of making up activities.  This
creates the usual problem with all the kids clamoring for each others'
attention, compounded by the fact that they're doing that all directly in my
ears.  I figure a more traditional online gaming format like a deathmatch
would've solved that non-objective problem but created a whole slew of new ones.&lt;/p&gt;

&lt;p&gt;In the final act they had fun destroying my daughters' meticulously constructed
village with a rain of killer bunnies, lava, and explosive minecarts (see the
previous note about taking a backup of my daughters' world before we started).
I had to wipe the objects from the world multiple times because mineclone's
animals are &lt;em&gt;not&lt;/em&gt; coded to support large-scale use and the world would crawl
when they created too many of them.&lt;/p&gt;

&lt;p&gt;&lt;img src="http://www.pxtl.ca/images/2020-05-05-Minetest-birthday/lava-and-bunnies.jpg" alt="Lava and Killer Bunnies" /&gt;&lt;/p&gt;

&lt;p&gt;So yeah, overall?  Definitely a success.  My daughter and her friends are
talking about meeting up regularly in our little mineclone world.  Meanwhile I'm
trying to figure out what game to try next.&lt;/p&gt;

&lt;h1&gt;Next Time&lt;/h1&gt;

&lt;p&gt;Next post, &lt;a href="http://www.pxtl.ca/2020/05/12/minetest-pi4-recipe/"&gt;I'll get into the weeds of the setup process and gotchas for getting
these servers set up on a Pi4.  Recipes!  Linux!  Sudo all the things!&lt;/a&gt;&lt;/p&gt;
</a10:content></item><item><guid isPermaLink="true">http://www.pxtl.ca/2020/04/08/ip-webcam/</guid><link>http://www.pxtl.ca/2020/04/08/ip-webcam/</link><author>pxtl@hotmail.com</author><category>Software</category><title>Using your phone as a Webcam on Windows and Android</title><description>&lt;p&gt;What with covid-19, a lot of people are remoting and not a lot of people have
webcams. But everybody's got a smartphone. So here's a guide on how to use your
smartphone as a webcam with Android an Windows over wifi.&lt;/p&gt;

&lt;p&gt;This is pretty adminny. If you're not comfy with that you might need to look at
other approaches.&lt;/p&gt;

&lt;p&gt;One important wrinkle is performance: It runs down the battery on my phone, and
it slams the CPU on my desktop with interrupts.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Note that none of the software I'm recommending in this guide is open-source.
I cannot guarantee that the software discussed below has no malicious secret
intent.&lt;/strong&gt;&lt;/p&gt;

</description><pubDate>Wed, 08 Apr 2020 04:00:00 Z</pubDate><a10:updated>2020-04-08T04:00:00Z</a10:updated><a10:content type="html">&lt;p&gt;What with covid-19, a lot of people are remoting and not a lot of people have
webcams. But everybody's got a smartphone. So here's a guide on how to use your
smartphone as a webcam with Android an Windows over wifi.&lt;/p&gt;

&lt;p&gt;This is pretty adminny. If you're not comfy with that you might need to look at
other approaches.&lt;/p&gt;

&lt;p&gt;One important wrinkle is performance: It runs down the battery on my phone, and
it slams the CPU on my desktop with interrupts.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Note that none of the software I'm recommending in this guide is open-source.
I cannot guarantee that the software discussed below has no malicious secret
intent.&lt;/strong&gt;&lt;/p&gt;

&lt;!--excerpt--&gt;

&lt;p&gt;Before I get into the details: if you don't like my guide there is also &lt;a href="http://ip-webcam.appspot.com/static/doc.html"&gt;the
official guide&lt;/a&gt; from the developer
of the tools I'm describing.&lt;/p&gt;

&lt;h2&gt;Setting up your phone as a server&lt;/h2&gt;

&lt;p&gt;First, you need to get your Android phone onto a static IP. So go to Settings -&gt;
About -&gt; Status to find your Wi-fi MAC address, and in your router's DHCP/LAN
settings, you need to bind that address to a fixed IP. Also take note of &lt;em&gt;which&lt;/em&gt;
wifi network your phone lives on, if you have more than one in your home or
workplace.&lt;/p&gt;

&lt;p&gt;Next, you need to install &lt;a href="https://play.google.com/store/apps/details?id=com.pas.webcam&amp;amp;hl=en_CA"&gt;IP
Webcam&lt;/a&gt;
on your android phone. This turns your phone into a video server - which is why
it needs a static IP. Run IP Webcam.&lt;/p&gt;

&lt;h3&gt;Recommended settings:&lt;/h3&gt;

&lt;ul&gt;
&lt;li&gt;IP WEBCAM SETTINGS -&gt; Video Preferences
&lt;ul&gt;
&lt;li&gt;Set the "main" camera to the front-facing camera. I know the rear-camera is
better but this is just easier to set up.&lt;/li&gt;
&lt;li&gt;Set the "Video Resolution" to 640x480 or lower. I found performance problems
at higher resolution.&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;li&gt;CONNECTION SETTINGS -&gt; Local Broadcasting
&lt;ul&gt;
&lt;li&gt;Set a Login and Password.&lt;/li&gt;
&lt;li&gt;I'm assuming your network is secure so we're not going to fuss with SSL, I
couldn't make SSL work.&lt;/li&gt;
&lt;li&gt;Just to be safe, don't get naked in front of your phone while it's running
the server&lt;/li&gt;
&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h3&gt;Notes on "run in background":&lt;/h3&gt;

&lt;p&gt;IP WebCam has the option to run in background, but I found the notification icon
that indicates this is happening easy-to-miss and so it would be very easy to
accidentally leave it broadcasting your life. It does save power because you can
shut down the video view and do other things while it's streaming, but I
recommend not using it. If power is a problem, get a power-cable for your
computer desk.&lt;/p&gt;

&lt;h3&gt;Starting it up&lt;/h3&gt;

&lt;p&gt;Now that your settings are confirmed, click "start server". It will show the
live video from your phoen that it is broadcasting, along with the address if
the webserver your phone is running - eg http://192.168.1.X:8080. Note that this
is &lt;em&gt;not&lt;/em&gt; the address of the raw stream, but of a website you can use to
configure your device. Feel free to hit that address with your browser to try
it.&lt;/p&gt;

&lt;p&gt;The actual video feed lives at http://192.168.1.X:8080/video. Note the /video
directory. It's over HTTP, so again you can hit it with your browser. You'll be
prompted for username and password.&lt;/p&gt;

&lt;p&gt;Leave the server running while we set up the client.&lt;/p&gt;

&lt;h2&gt;Setting up your Windows PC as a client&lt;/h2&gt;

&lt;p&gt;First, confirm that your Windows PC is on the same WiFi network as your phone.&lt;/p&gt;

&lt;p&gt;Now we install the client software. We're using &lt;a href="https://ip-webcam.appspot.com/"&gt;IP Camera
Adapter&lt;/a&gt; which will allow you to connect your
Windows PC to the HTTP videostream and use it as a webcam.&lt;/p&gt;

&lt;p&gt;Install the software. When completed, open the app "Configure IP Camera Adapter"
that is now present in your start menu.&lt;/p&gt;

&lt;p&gt;Then:&lt;/p&gt;

&lt;ol&gt;
&lt;li&gt;&lt;p&gt;Type in the camera feed URL - remember this is the one that ends in "/video".
So in total it should be something like http://192.168.1.X:8080/video . &lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Key in your username and password.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;Click "Autodetect" - this will test our connection to your phone and read in
its resolution. It should match whatever you set back in the server setup
step.&lt;/p&gt;&lt;/li&gt;
&lt;li&gt;&lt;p&gt;OK.&lt;/p&gt;&lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;Now use your video-chat program of choice's "video test" tool to confirm it
works.&lt;/p&gt;

&lt;p&gt;Did it work? Yay!&lt;/p&gt;

&lt;p&gt;No? You're on your own, bud.&lt;/p&gt;

&lt;h2&gt;Workflow&lt;/h2&gt;

&lt;p&gt;I find it best to keep my video stream &lt;em&gt;off&lt;/em&gt; and just keep the button to turn my
phone into a camera on my phone's home-screen. You will see a wierd backwards
text in your video-feed if your computer cannot reach the phone. So when a
videochat starts, I open the app, scroll to the bottom and click "start", and
then put my phone in place to work as a camera.&lt;/p&gt;

&lt;p&gt;Remember that the camera mode does run down the battery, so it may be handy to
have a charge-cable near whatever cradle-like setup you've rigged for your phone
at your desk.&lt;/p&gt;
</a10:content></item><item><guid isPermaLink="true">http://www.pxtl.ca/2017/03/11/xoutput/</guid><link>http://www.pxtl.ca/2017/03/11/xoutput/</link><author>pxtl@hotmail.com</author><category>Programming</category><title>XOutput v0.2.0</title><description>&lt;p&gt;&lt;a href="https://github.com/Pxtl/XOutput/releases/tag/v0.2.0"&gt;I've released my first version of my fork of XOutput.&lt;/a&gt;&lt;br /&gt;
It's a simple wrapper that allows you to rebind a DInput gamepad as an XInput gamepad.&lt;br /&gt;
Since most games are standardized on XInput (XBox360 controllers), 
this allows you to make an existing gamepad masquerade as an XBox360 controller. &lt;/p&gt;
</description><pubDate>Sat, 11 Mar 2017 05:00:00 Z</pubDate><a10:updated>2017-03-11T05:00:00Z</a10:updated><a10:content type="html">&lt;p&gt;&lt;a href="https://github.com/Pxtl/XOutput/releases/tag/v0.2.0"&gt;I've released my first version of my fork of XOutput.&lt;/a&gt;&lt;br /&gt;
It's a simple wrapper that allows you to rebind a DInput gamepad as an XInput gamepad.&lt;br /&gt;
Since most games are standardized on XInput (XBox360 controllers), 
this allows you to make an existing gamepad masquerade as an XBox360 controller. &lt;/p&gt;
</a10:content></item><item><guid isPermaLink="true">http://www.pxtl.ca/2017/02/22/yorkblvdcentrebikelane/</guid><link>http://www.pxtl.ca/2017/02/22/yorkblvdcentrebikelane/</link><author>pxtl@hotmail.com</author><category>HamOnt</category><title>York Boulevard Centre-aligned Bike Track</title><description>&lt;p&gt;The city has told us that the York and Dundurn bike lanes may need to be removed as York and Dundurn must carry westbound automotive traffic that will no longer fit on LRT-equipped King Street.&lt;/p&gt;

&lt;p&gt;Since everyone else has thrown a design out there for saving the York bike track, I thought I'd do the same.&lt;/p&gt;

&lt;p&gt;There are a handful of cities that have implemented centre-aligned bike lanes.  There are some advantages to this flow: Drivers expect to see oncoming traffic on the left.  In one-way traffic like Cannon, this means putting the cycle track on the left side (south for Cannon).  In a two-way street, this means using the centre - it's on the left for both directions of traffic.  This allows us to unify the two bike lanes into a  single protected bidirectional cycle track without having oncoming traffic on the right.&lt;/p&gt;

&lt;p&gt;Also, a feature very particular to York and Cannon; Cannon merges with York Boulevard at Queen to form a single road.  The Cannon lanes, if continued, would end in the centre of this road.  So let's see what that looks like: The Cannon lanes continue right to Queen, and only have to deal with left-turning traffic turning across the bike lane.  &lt;/p&gt;

&lt;p&gt;&lt;img src="http://www.pxtl.ca/images/yorkcentrebikelanes_queennoboxes.jpg" alt="picture of straight-through bike-lane at York/Queen/Cannon" /&gt;&lt;/p&gt;

</description><pubDate>Wed, 22 Feb 2017 05:00:00 Z</pubDate><a10:updated>2017-02-22T05:00:00Z</a10:updated><a10:content type="html">&lt;p&gt;The city has told us that the York and Dundurn bike lanes may need to be removed as York and Dundurn must carry westbound automotive traffic that will no longer fit on LRT-equipped King Street.&lt;/p&gt;

&lt;p&gt;Since everyone else has thrown a design out there for saving the York bike track, I thought I'd do the same.&lt;/p&gt;

&lt;p&gt;There are a handful of cities that have implemented centre-aligned bike lanes.  There are some advantages to this flow: Drivers expect to see oncoming traffic on the left.  In one-way traffic like Cannon, this means putting the cycle track on the left side (south for Cannon).  In a two-way street, this means using the centre - it's on the left for both directions of traffic.  This allows us to unify the two bike lanes into a  single protected bidirectional cycle track without having oncoming traffic on the right.&lt;/p&gt;

&lt;p&gt;Also, a feature very particular to York and Cannon; Cannon merges with York Boulevard at Queen to form a single road.  The Cannon lanes, if continued, would end in the centre of this road.  So let's see what that looks like: The Cannon lanes continue right to Queen, and only have to deal with left-turning traffic turning across the bike lane.  &lt;/p&gt;

&lt;p&gt;&lt;img src="http://www.pxtl.ca/images/yorkcentrebikelanes_queennoboxes.jpg" alt="picture of straight-through bike-lane at York/Queen/Cannon" /&gt;&lt;/p&gt;

&lt;!--excerpt--&gt;

&lt;p&gt;No need to cross York or Cannon to continue on the track.  Since the left-turn signals are already in a separate phase, that means &lt;em&gt;no&lt;/em&gt; unexpected interactions between the bike lane and drivers for straight-through cyclists.  Of course, a "yield to bikes" sign is needed for the uncontrolled left-turn at the U-Turn slip road from Cannon to eastbound York.&lt;/p&gt;

&lt;p&gt;York also offers a particular advantage that its massive tree-lined grassy median will provide a refuge for cyclists; a bit of greenery and safe space in a ride that's otherwise a bit intense.&lt;/p&gt;

&lt;p&gt;This isn't some zany invention.  Other cities have noticed the merits of a bike track in the middle of a bi-directional road - all the cyclists are in one place, and oncoming traffic is on the left.  Contrast that to two side-aligned bike lanes (one in each direction) which suffer conflicts with parking and space issues.  Alternately, a bi-directional cycle track on the side of the road means oncoming traffic in a very unexpected place.  &lt;/p&gt;

&lt;p&gt;Of course, there are drawbacks too - it makes turning for cyclists much more difficult.  Every turn requires crossing the car lanes, possibly with a bike box.  And it only works if drivers can only go left at an explicit left-turn-signal, or else left-turns are going across a bike lane, which in the case of York could be very unexpected since the "left hook" zone would be very hard for a westbound driver to see.&lt;/p&gt;

&lt;h2&gt;Other cities with centre-aligned bike lanes&lt;/h2&gt;

&lt;p&gt;The most notable street with a centre-aligned cycle track is easily one of the most notable streets in the world: Pennsylvania Avenue, in DC.  The street with the White House on it.&lt;/p&gt;

&lt;p&gt;Look at that jerk blocking the bike lane with his big limo.&lt;/p&gt;

&lt;p&gt;&lt;img src="http://www.pxtl.ca/images/1024px-Barack_Obama_and_Michelle_Obama_in_inaugural_parade_01-21-13.jpg" alt="Obama inauguration" /&gt; &lt;/p&gt;

&lt;p&gt;&lt;em&gt;Image from Wikimedia Commons and is public-domain.&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;Because of the need for parades on Pennsylvania, they can't put proper protections on ther bike lane.  York Boulevard is a lot of things, but not a parade route.  So we don't have that limitation.&lt;/p&gt;

&lt;p&gt;&lt;img src="http://www.pxtl.ca/images/yorkcentrebikelanes_pennsylvania_crossing.jpg" alt="Google Streetview Image of Pennsylvania Ave bike lanes with intersection showing crossing sign" /&gt;&lt;/p&gt;

&lt;p&gt;Looking closer, most of the intersections on Pennsylvania advise turning cyclists just to cross in crosswalks - topologically this is practically identical to a bike box, but lets the city focus on their nice, presentable concrete crossings.  Where no concrete exists, a slightly-unorthodox bike box is present.&lt;/p&gt;

&lt;p&gt;&lt;img src="http://www.pxtl.ca/images/yorkcentrebikelanes_pennsylvania_bikebox.jpg" alt="Google Streetview Image of Pennsylvania Ave bike lanes with bike box" /&gt;&lt;/p&gt;

&lt;p&gt;Another city with centre bike lanes is NYC.  Brooklyn sports a centre-aligned track on Sands St, leading to the bikeway on the Manhattan Bridge. &lt;/p&gt;

&lt;p&gt;&lt;img src="http://www.pxtl.ca/images/yorkcentrebikelanes_sandsbikeway.jpg" alt="Google Streetview Image of Sands bike track protected" /&gt;&lt;/p&gt;

&lt;p&gt;The ability to protect these centre bikeways shines here. 
 Again we see some use of bike boxes for turning movements.&lt;/p&gt;

&lt;p&gt;&lt;img src="http://www.pxtl.ca/images/yorkcentrebikelanes_sandsbikebox.jpg" alt="Google Streetview Image of Sands bike track bike box" /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src="http://www.pxtl.ca/images/yorkcentrebikelanes_sandsbikeway2.jpg" alt="Google Streetview Image of Sands bike track end without bike box" /&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;maps and streetview images from Google Maps and are © Google, 2017.&lt;/em&gt;&lt;/p&gt;

&lt;h2&gt;Design&lt;/h2&gt;

&lt;p&gt;There are some challenges to York.  Without tearing out all the concrete and some traffic signals, the route will be slightly awkward at intersections.  We'll be repurposing the eastbound left-turn lanes, which are curved for left turns and so diverge somewhat from the straight path.  &lt;/p&gt;

&lt;p&gt;&lt;img src="http://www.pxtl.ca/images/yorkcentrebikelanes_lockeintersection.jpg" alt="map of Locke intersection" /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src="http://www.pxtl.ca/images/yorkcentrebikelanes_queenintersection.jpg" alt="map of Queen intersection" /&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;maps and streetview images from Google Maps and are © Google, 2017.&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;Another challenge is the unprotected left turn lanes that exist for minor intersections - one for Rolph's Gate, one for Oxford, and one for the Cannon-&gt;York U-turn.  Ultimately there's no good solution for those besides the same "yield to cyclists" sign we already see for left turns along the Cannon track.  The city used a more unorthodox structure on King and Paradise in Westdale which is a part of my regular commute, and it seems to cause nothing but confusion.&lt;/p&gt;

&lt;p&gt;&lt;img src="http://www.pxtl.ca/images/yorkcentrebikelanes_paradiseintersection.jpg" alt="Google Streetview Image of Paradise intersection" /&gt;&lt;/p&gt;

&lt;p&gt;So we'll be consistent - on the eastbound side of York, the leftmost lane and the turn-lanes are now the cycle track, where a turn lane is present, we'll use the now-available next lane as the turn lane.  So the experience should be nearly unchanged for eastbound drivers, they're just turning from a new turning lane.&lt;/p&gt;

&lt;p&gt;&lt;img src="http://www.pxtl.ca/images/yorkcentrebikelanes_rolphsgateintersection.jpg" alt="Map of Rolph's Gate turn" /&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src="http://www.pxtl.ca/images/yorkcentrebikelanes_oxfordintersection.jpg" alt="Map of Oxford turn" /&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;maps and streetview images from Google Maps and are © Google, 2017.&lt;/em&gt;&lt;/p&gt;

&lt;p&gt;Places for overhanging "Yield to cyclists" signs are marked with a yellow car symbol.&lt;/p&gt;

&lt;h2&gt;Drawbacks&lt;/h2&gt;

&lt;p&gt;Sadly, some concrete will need to be reworked - to allow cyclists to turn, we need bike boxes at Queen, Dundurn, and Locke... but there's a concrete and grass median in the way.  Adding ramps or flattening it is the best option, since the crosswalks aren't wide enough to work as half-cross-walks, half-bike-boxes.  Bike boxes are never ideal, since it means the cyclist has to wait for a full cycle to turn.  In this case, both left turns and right turns require a full cycle, cyclists even have to turn right to get into the leftwards bike box.&lt;/p&gt;

&lt;p&gt;Also, accessing minor roads will obviously invite cyclists to dart across traffic.  Being able to turn only at Locke and Queen isn't anybody's favourite option.  Particularly since York's median has lowered concrete ramps for pedestrians at minor intersections, cyclists will obviously feel invited to use those.  There's no good answer besides "wait for your gap".  Side-aligned bike lanes do not have this problem for right turns, but they double it for left ones.&lt;/p&gt;

&lt;h2&gt;Full Map of Design&lt;/h2&gt;

&lt;p&gt;The full map is available at &lt;a href="https://drive.google.com/open?id=10wVygA4_2wSnY_D1Vk5UABoQEeE&amp;amp;usp=sharing"&gt;my maps&lt;/a&gt;.&lt;/p&gt;

&lt;p&gt;&lt;img src="http://www.pxtl.ca/images/yorkcentrebikelanes_mapall.jpg" alt="Google map of full bikelane system" /&gt;&lt;/p&gt;

&lt;p&gt;&lt;em&gt;maps and streetview images from Google Maps and are © Google, 2017.&lt;/em&gt;&lt;/p&gt;
</a10:content></item><item><guid isPermaLink="true">http://www.pxtl.ca/2016/10/13/xmlcommentmarkdowngeneratorupdated/</guid><link>http://www.pxtl.ca/2016/10/13/xmlcommentmarkdowngeneratorupdated/</link><author>pxtl@hotmail.com</author><category>Programming</category><title>XmlCommentMarkDownGenerator Updated</title><description>&lt;p&gt;I'm an idiot.  Always commit everything.  Always.  And only push your build artifacts, not straight from the project.&lt;/p&gt;

&lt;p&gt;I omitted the crucial line of the .nuspec that makes the .targets thing work, and so the cool build-generates-your-markdown wasn't actually available for users since version 0.1.5977.1837.&lt;br /&gt;
The latest version 0.2.6130.564 fixes the issue.&lt;/p&gt;

&lt;p&gt;A lesson learned, but I wonder how many people I infuriated in the meantime?&lt;/p&gt;
</description><pubDate>Thu, 13 Oct 2016 04:00:00 Z</pubDate><a10:updated>2016-10-13T04:00:00Z</a10:updated><a10:content type="html">&lt;p&gt;I'm an idiot.  Always commit everything.  Always.  And only push your build artifacts, not straight from the project.&lt;/p&gt;

&lt;p&gt;I omitted the crucial line of the .nuspec that makes the .targets thing work, and so the cool build-generates-your-markdown wasn't actually available for users since version 0.1.5977.1837.&lt;br /&gt;
The latest version 0.2.6130.564 fixes the issue.&lt;/p&gt;

&lt;p&gt;A lesson learned, but I wonder how many people I infuriated in the meantime?&lt;/p&gt;
</a10:content></item><item><guid isPermaLink="true">http://www.pxtl.ca/2016/09/12/xmlcommentmarkdowngenerator/</guid><link>http://www.pxtl.ca/2016/09/12/xmlcommentmarkdowngenerator/</link><author>pxtl@hotmail.com</author><category>Programming</category><title>XmlCommentMarkDownGenerator</title><description>&lt;p&gt;I've released version 0.2 of &lt;a href="https://github.com/Pxtl/XmlCommentMarkDownGenerator"&gt;XmlCommentMarkDownGenerator&lt;/a&gt;.  If you're running a C#-based project on GitHub, it could be useful to you - it takes your Xml comments and converts them into GitHub-flavoured markdown.  This gives you a nice document page right in your repo that you can link to.  I've set it up as a NuGet package, so in your C# project all you have to do is add the NuGet package to your project and it will add a post-build step to your project to automatically run the tool and generate the markdown file.  I was surprised that NuGet makes that a thing - apparently it's called custom .targets.  See &lt;a href="https://github.com/Pxtl/XmlCommentMarkDownGenerator/blob/master/PxtlCa.XmlCommentMarkDownGenerator.targets"&gt;https://github.com/Pxtl/XmlCommentMarkDownGenerator/blob/master/PxtlCa.XmlCommentMarkDownGenerator.targets&lt;/a&gt; to see how that kind of "custom post-build-step as a nuget package" thing is implemented.&lt;/p&gt;

&lt;p&gt;It was forked from &lt;a href="https://gist.github.com/lontivero/593fc51f1208555112e0"&gt;https://gist.github.com/lontivero/593fc51f1208555112e0&lt;/a&gt;, but I'd like to think I've polished it up a fair bit.  This was really just a side-project while I worked on BigVariant and Nustache, but it's the one with the most stars and downloads so I thought I should give it a little TLC.  Pull requests are always welcome. &lt;/p&gt;
</description><pubDate>Mon, 12 Sep 2016 04:00:00 Z</pubDate><a10:updated>2016-09-12T04:00:00Z</a10:updated><a10:content type="html">&lt;p&gt;I've released version 0.2 of &lt;a href="https://github.com/Pxtl/XmlCommentMarkDownGenerator"&gt;XmlCommentMarkDownGenerator&lt;/a&gt;.  If you're running a C#-based project on GitHub, it could be useful to you - it takes your Xml comments and converts them into GitHub-flavoured markdown.  This gives you a nice document page right in your repo that you can link to.  I've set it up as a NuGet package, so in your C# project all you have to do is add the NuGet package to your project and it will add a post-build step to your project to automatically run the tool and generate the markdown file.  I was surprised that NuGet makes that a thing - apparently it's called custom .targets.  See &lt;a href="https://github.com/Pxtl/XmlCommentMarkDownGenerator/blob/master/PxtlCa.XmlCommentMarkDownGenerator.targets"&gt;https://github.com/Pxtl/XmlCommentMarkDownGenerator/blob/master/PxtlCa.XmlCommentMarkDownGenerator.targets&lt;/a&gt; to see how that kind of "custom post-build-step as a nuget package" thing is implemented.&lt;/p&gt;

&lt;p&gt;It was forked from &lt;a href="https://gist.github.com/lontivero/593fc51f1208555112e0"&gt;https://gist.github.com/lontivero/593fc51f1208555112e0&lt;/a&gt;, but I'd like to think I've polished it up a fair bit.  This was really just a side-project while I worked on BigVariant and Nustache, but it's the one with the most stars and downloads so I thought I should give it a little TLC.  Pull requests are always welcome. &lt;/p&gt;
</a10:content></item><item><guid isPermaLink="true">http://www.pxtl.ca/2016/04/02/first-post/</guid><link>http://www.pxtl.ca/2016/04/02/first-post/</link><author>pxtl@hotmail.com</author><category>Blog</category><title>First Post</title><description>&lt;p&gt;Hello, World.&lt;/p&gt;

&lt;p&gt;This site is intended to be a place to put news related to my hobby projects.&lt;/p&gt;
</description><pubDate>Sat, 02 Apr 2016 04:00:00 Z</pubDate><a10:updated>2016-04-02T04:00:00Z</a10:updated><a10:content type="html">&lt;p&gt;Hello, World.&lt;/p&gt;

&lt;p&gt;This site is intended to be a place to put news related to my hobby projects.&lt;/p&gt;
</a10:content></item></channel></rss>